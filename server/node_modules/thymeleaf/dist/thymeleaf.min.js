var Thymeleaf=function(e){"use strict";class r{constructor(e,r,t){this.prefix=e,this.name=r,this.isomorphic=t}process(e,r,t,s){return e.removeAttribute(r),this.isomorphic&&e.removeAttribute(`${this.prefix}:${this.name}`),!1}}class t extends r{constructor(e,r){super(e,"attr",r)}process(e,r,t,s){return/(.+=.+,)*.+=.+/.test(t)?t.split(",").forEach((r=>{let[t,n]=r.split("="),o=s.expressionProcessor.process(n,s);var i;e.setAttribute(t,"string"!=typeof(i="string"==typeof o?o:JSON.stringify(o))?i:i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"))})):"test"!==process.env.NODE_ENV&&console.warn(`Value to ${r}, ${t}, doesn't seem to contain an attribute assignment expression.  Ignoring.`),super.process(e,r,t,s)}}class s{constructor(e,r){this.prefix=e,this.name=r}process(e,r){return!1}}function n(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function o(e,r,t){return e.getAttribute(`${r}:${t}`)||e.getAttribute(`data-${r}-${t}`)}function i(e){return function(e){return(new DOMParser).parseFromString(e,"text/html")}(e)}function a(e){return function(e){if(e.nodeType===Node.DOCUMENT_NODE){let r="",{contentType:t,docType:s,firstElementChild:n}=e;return s?r+=`<!DOCTYPE ${s.name}>`:"HTML"!==n.tagName&&"text/html"!==t||(r+="<!DOCTYPE html>"),r+=n.outerHTML,r}return e.outerHTML}(e)}class l extends s{constructor(e){super(e,"block")}process(e,r){let t=e.parentElement;for(;e.firstChild;){let r=e.firstChild;t.insertBefore(r,e),1===r.nodeType&&e.__thymeleafLocalVariables&&(r.__thymeleafLocalVariables={...r.__thymeleafLocalVariables||{},...e.__thymeleafLocalVariables})}return t.removeChild(e),!0}}class c extends r{constructor(e,r){super(e,"checked",r)}process(e,r,t,s){return s.expressionProcessor.process(t,s)?e.setAttribute("checked",""):e.removeAttribute("checked"),super.process(e,r,t,s)}}class p extends r{constructor(e,r){super(e,"classappend",r)}process(e,r,t,s){let n=s.expressionProcessor.process(t,s);return n&&(e.className+=` ${n}`),super.process(e,r,t,s)}}class u extends r{constructor(e,r){super(e,"each",r)}process(e,r,t,s){super.process(e,r,t,s);let n=s.expressionProcessor.process(t,s);if(n){let{localValueName:r,iterable:t}=n,s=e.cloneNode(!0);for(let n of t){let t=s.cloneNode(!0);t.__thymeleafLocalVariables={[r]:n},e.parentElement.appendChild(t)}}return e.parentElement.removeChild(e),!0}}class m extends r{constructor(e,r,t){super(e,r,t)}process(e,r,t,s){let n=s.expressionProcessor.process(t,s);return e.setAttribute(this.name,n?n.toString():""),super.process(e,r,t,s)}}const h=["datetime","href","src","style","value"],f="fragment";class d extends r{constructor(e,r){super(e,f,r)}}class g extends r{constructor(e,r){super(e,"if",r)}process(e,r,t,s){return s.expressionProcessor.process(t,s)?super.process(e,r,t,s):(e.remove(),!0)}}var x,w="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},E={exports:{}};x=E,function(e,r){if(x.exports)x.exports=r();else{var t=r();Object.keys(t).forEach((function(r){e[r]=t[r]}))}}(w,(function(){return{$:function(e,r){return(r||document).querySelector(e)},$$:function(e,r){return Array.prototype.slice.call((r||document).querySelectorAll(e))}}}));var y=E.exports;async function b(e,r,t){let{templateResolver:s}=t;if(s){let{templateName:t,fragmentName:n}=r,o=i(await s(t));return y.$(`[${e}\\:${f}^="${n}"]`,o)||y.$(`[data-${e}-${f}^="${n}"]`,o)}return console.log("No template resolver configured"),null}class v extends r{constructor(e,r){super(e,"insert",r)}async process(e,r,t,s){super.process(e,r,t,s),n(e);let i=s.expressionProcessor.process(t,s);if(i){let r=await b(this.prefix,i,s);if(r){let t=o(r,this.prefix,f),{parameterNames:n}=s.fragmentSignatureProcessor.process(t,s);if(n){let{parameters:e}=i,t={};n.forEach(((r,s)=>{t[r]=e[r]||e[s]||null})),r.__thymeleafLocalVariables=t}return e.appendChild(r),!0}}return!1}}class C extends r{constructor(e,r,t){super(e,r,t)}process(e,r,t,s){let n=s.expressionProcessor.process(t,s);return n?e.setAttribute(this.name,n.toString()):e.removeAttribute(this.name),super.process(e,r,t,s)}}const N=["alt","class"];class L extends r{constructor(e,r){super(e,"remove",r)}process(e,r,t,s){switch(super.process(e,r,t,s),t){case"all":return e.parentElement.removeChild(e),!0;case"all-but-first":for(;e.lastElementChild!==e.firstElementChild;)e.removeChild(e.lastElementChild);return!1}}}class A extends r{constructor(e,r){super(e,"replace",r)}async process(e,r,t,s){super.process(e,r,t,s),n(e);let i=s.expressionProcessor.process(t,s);if(i){let r=await b(this.prefix,i,s);if(r){let t=o(r,this.prefix,f),{parameterNames:n}=s.fragmentSignatureProcessor.process(t,s);if(n){let{parameters:e}=i,t={};n.forEach(((r,s)=>{t[r]=e[r]||e[s]||null})),r.__thymeleafLocalVariables=t}return e.parentElement.insertBefore(r,e),e.remove(),!0}}return e.remove(),!1}}class P extends r{constructor(e,r){super(e,"text",r)}async process(e,r,t,s){let n=s.expressionProcessor.process(t,s);return e.textContent="object"==typeof n?await async function(e,r){if(r){let{key:t,parameters:s}=e;return await r(t,s)||""}return console.log("No message resolver configured"),null}(n,s.messageResolver):n,super.process(e,r,t,s)}}class O extends r{constructor(e,r){super(e,"unless",r)}process(e,r,t,s){return s.expressionProcessor.process(t,s)?(n(e),e.parentNode.removeChild(e),!0):super.process(e,r,t,s)}}class $ extends r{constructor(e,r){super(e,"utext",r)}process(e,r,t,s){return e.innerHTML=s.expressionProcessor.process(t,s),super.process(e,r,t,s)}}class S extends r{constructor(e,r){super(e,"with",r)}process(e,r,t,s){super.process(e,r,t,s);let n={};return s.expressionProcessor.process(t,s).forEach((e=>{let{name:r,value:t}=e;n[r]=t})),e.__thymeleafLocalVariables=n,!0}}class k extends r{constructor(e,r){super("xmlns",e),this.isomorphic=r}process(e,r,t,s){return e.removeAttribute(r),this.isomorphic&&e.removeAttribute(`xmlns:${this.isomorphic.prefix}`),!1}}class T{constructor(e,r){this.name=e,this.prefix=r}get expressionObjects(){return null}get processors(){return null}}class R extends T{constructor(){let e=arguments.length>1?arguments[1]:void 0;super("Standard",arguments.length>0&&void 0!==arguments[0]?arguments[0]:"thjs"),this.isomorphic=e}get processors(){let{prefix:e,isomorphic:r}=this;return[new v(e,r),new A(e,r),new u(e,r),new g(e,r),new O(e,r),new S(e,r),new t(e,r),new p(e,r),...h.map((t=>new m(e,t,r))),...N.map((t=>new C(e,t,r))),new c(e,r),new P(e,r),new $(e,r),new d(e,r),new L(e,r),new l(e),new k(e,r)]}}const V={dialects:[new R]},_={...V,dialects:[new R("th",{prefix:"thjs"})]};class F{matches(e,t){let{isomorphic:n,name:o,prefix:i}=t;if(t instanceof r){let r=[i];n&&r.unshift(n.prefix);for(let t of r){let r;if(r=`${t}:${o}`,e.hasAttribute(r))return r;if(r=`data-${t}-${o}`,e.hasAttribute(r))return r}}else if(t instanceof s){let r=`${t.prefix}:${o}`;if(e.tagName===r.toUpperCase())return r}return null}}function I(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var s=t.call(e,r||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}class M{constructor(e){I(this,"position",0),I(this,"positionStack",[]),this.input=e}clear(){if(void 0===this.positionStack.pop())throw new Error("Called clear() but no matching mark()")}exhausted(){return this.position===this.input.length}mark(){this.positionStack.push(this.position)}markAndClearOrReset(e){this.mark();let r=e();return null!==r?(this.clear(),r):(this.reset(),null)}read(e){let r=this.input.substring(this.position),t=r.match(/^\s+/);t&&(t=t[0],r=r.substring(t.length));let s=new RegExp(e.source).exec(r);if(s){let[e]=s;if(r.startsWith(e))return this.position+=e.length+(t?t.length:0),s}return null}reset(){let e=this.positionStack.pop();if(void 0===e)throw new Error("Called reset() but no matching mark()");this.position=e}}class j{constructor(e){I(this,"expressionStack",[]),this.grammar=e}parse(e){let r=new M(e),t=this.grammar.accept(r,this);if(null===t||!r.exhausted()){let r=`Failed to parse "${e}"`;if("production"===process.env.NODE_ENV)return console.error(r),null;throw new Error(r)}return t}parseWithExpression(e,r){if("string"==typeof r){let t=this.grammar.findRuleByName(r);return t?t.accept(e,this):null}if(r instanceof RegExp){let t=e.read(r);if(t)return t[0]}else if("function"==typeof r)return r(e,this);return null}trackExpression(e,r,t,s){let n=this.expressionStack.push({name:t,expression:"function"!=typeof r?r.toString():null,input:e.input.substring(e.position)}),o=s();return null!==o?o:(this.expressionStack.splice(n-1),null)}}class D{constructor(e){this.parser=new j(e)}process(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=this.parser.parse(e);return t?.({...r,expression:e})}}const W=e=>(r,t)=>{let s=t.parseWithExpression(r,e);return null!==s&&r.exhausted()?s:null},q=e=>e;class U{constructor(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:q;this.name=e,this.expression=r,this.matchProcessor=t}accept(e,r){let{expression:t,name:s}=this;return r.trackExpression(e,t,s,(()=>{let s=r.parseWithExpression(e,t);return null!==s?this.matchProcessor(s):null}))}}class B extends U{constructor(e,r,t){super(e,r,t||(e=>function(){for(var r=arguments.length,t=new Array(r),s=0;s<r;s++)t[s]=arguments[s];return"function"==typeof e?e.apply(null,t):e}))}}class H{constructor(e,r){this.name=e;for(var t=arguments.length,s=new Array(t>2?t-2:0),n=2;n<t;n++)s[n-2]=arguments[n];this.rules=[].concat(r,s)}accept(e,r){return this.startingRule.accept(e,r)}findRuleByName(e){let r=this.rules.find((r=>r.name===e));if(!r)throw new Error(`Failed to find a rule named "${e}" in the grammar`);return r}get startingRule(){return this.rules[0]}}const z=e=>(r,t)=>r.markAndClearOrReset((()=>{let s=t.parseWithExpression(r,e);return null!==s?s:""})),K=e=>(r,t)=>r.markAndClearOrReset((()=>{let s=[];for(;;){let n=r.markAndClearOrReset((()=>t.parseWithExpression(r,e)));if(!n)break;s.push(n)}return s.length>0?s:null})),Y=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return(e,t)=>e.markAndClearOrReset((()=>{for(let s of r){let r=e.markAndClearOrReset((()=>t.parseWithExpression(e,s)));if(null!==r)return r}return null}))},Z=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return(e,t)=>e.markAndClearOrReset((()=>{let s=[];for(let n of r){let r=e.markAndClearOrReset((()=>t.parseWithExpression(e,n)));if(null===r)return null;s.push(r)}return s}))},G=e=>(r,t)=>r.markAndClearOrReset((()=>{let s=[];for(;;){let n=r.markAndClearOrReset((()=>t.parseWithExpression(r,e)));if(!n)break;s.push(n)}return s}));function J(e){return e.reduce(((e,r)=>e.concat(Array.isArray(r)?J(r):r)),[])}function Q(e,r){return e.find(((t,s)=>!!r(t)&&(e.splice(s,1),t)))}var X=new H("Thymeleaf fragment signature",new B("ThymeleafFragmentSignatureRule",W("FragmentSignature")),new B("FragmentSignature",Z("FragmentName",z("FragmentParameters")),(e=>{let[r,t]=e;return e=>({fragmentName:r(e),parameterNames:t?t(e):null})})),new B("FragmentName",/[\w-._]+/),new B("FragmentParameters",Z(/\(/,G("FragmentParameterNames"),/\)/),(e=>{let[,[r]]=e;return e=>r(e)})),new B("FragmentParameterNames",Z("Identifier",G(Z(/,/,"Identifier"))),(e=>r=>e?J(e).filter((e=>","!==e)).map((e=>e(r))):[])),new B("Identifier",/[#a-zA-Z_][\w]*/));const ee=new H("Thymeleaf Expression Language",new B("ThymeleafExpression",Y(W("VariableExpression"),W("MessageExpression"),W("LinkExpression"),W("FragmentExpression"),W("Iteration"),W("StringConcatenation"),W("ScopedVariables"),W("Literal"),W("LogicalExpression"),W("IfThenCondition"),W("IfThenElseCondition"),W("TokenLiteral"),W("Nothing"))),new B("VariableExpression",Z(/\${/,"Chain",/\}/),(e=>{let[,r]=e;return e=>{let t=r(e);return null!=t?t:""}})),new B("Chain",Z(z("Negation"),"ChainLink",G(Z(/\./,"ChainLink"))),(e=>{let[r,...t]=e;return e=>{let s=J(t).filter((e=>"."!==e)).reduce(((r,t)=>null==r?r:t(r,e)),e);return"function"==typeof r?!s:s}})),new B("ChainLink",Y("MethodCall","ArrayIndex","PropertyName","Literal")),new B("MessageExpression",Z(/#{/,"MessageKey",z(Z(/\(/,Z("Expression",G(Z(/,/,"Expression"))),/\)/)),/}/),(e=>{let[,r,[,t]]=e;return e=>({type:"message",key:r(e),parameters:t?J(t).filter((e=>"function"==typeof e)).map((r=>r(e))):null})})),new B("MessageKey",/[\w.-]+/),new B("LinkExpression",(re=/^@\{(.+?)(\(.+\))?\}$/,te=["Url","UrlParameters"],(e,r)=>e.markAndClearOrReset((()=>{let t=e.read(re);if(t){let e=[t[0]];for(let s=1;s<t.length;s++){let n=t[s];if(void 0!==n){let t=r.parseWithExpression(new M(n),te[s-1]);if(null===t)return null;e.push(t)}}return e}return null}))),(e=>{let[,r,t]=e;return e=>{let s=r(e);if(t){let r=new D(ee),n=t(e).slice(1,-1).split(",").map((t=>{let[s,n]=t.split("=");return[s,r.process(n,e)]}));for(;;){let e=/(.*?)\{(.+?)\}(.*)/.exec(s);if(!e)break;{let[,r,t,o]=e,i=Q(n,(e=>{let[r]=e;return r===t}));i&&(s=`${r}${i[1]}${o}`)}}n.length&&(s+=`?${n.map((e=>{let[r,t]=e;return`${r}=${t}`})).join("&")}`)}return s}})),new B("Url",/.+/),new B("UrlParameters",/\((.+)\)/),new B("FragmentExpression",Z(/~{/,"TemplateName",/::/,"FragmentName",z("FragmentParametersSection"),/}/),(e=>{let[,r,,t,s]=e;return e=>({type:"fragment",templateName:r(e),fragmentName:t(e),parameters:s?s(e):null})})),new B("TemplateName",Y(/[\w-._/]+/,"VariableExpression")),new B("FragmentName",/[\w-._]+/),new B("FragmentParametersSection",Z(/\(/,z("FragmentParameters"),/\)/),(e=>{let[,r]=e;return e=>r(e)})),new B("FragmentParameters",Z("Expression",G(Z(/,/,"Expression"))),(e=>r=>e?J(e).filter((e=>","!==e)).map((e=>e(r))):[])),new B("Iteration",Z("Identifier",z(Z(/,/,"Identifier")),/:/,"VariableExpression"),(e=>{let[r,[,t],,s]=e;return e=>({type:"iteration",localValueName:r(e),iterable:s(e),iterationStatusVariable:t?t(e):null})})),new B("ScopedVariables",Z("ScopedVariable",G(Z(/,/,"ScopedVariable"))),(e=>r=>J(e).map((e=>e(r))))),new B("ScopedVariable",Z("Identifier",/=/,"Expression"),(e=>{let[r,,t]=e;return e=>({name:r(e),value:t(e)})})),new B("Literal",Y("StringLiteral","NumberLiteral","BooleanLiteral","NullLiteral")),new B("StringLiteral",/''|'.*?(?!\\').'/,(e=>()=>e.slice(1,-1).replace(/\\/g,""))),new B("NumberLiteral",/\d+(\.\d+)?/,(e=>()=>parseFloat(e))),new B("BooleanLiteral",/(true|false)/,(e=>()=>"true"===e)),new B("NullLiteral",/null/,(()=>()=>null)),new B("TokenLiteral",/[^: ${}]+/,(e=>()=>e)),new B("StringConcatenation",Z("Concatenatable",K(Z(/\+/,"Concatenatable"))),(e=>r=>J(e).filter((e=>"+"!==e)).reduce(((e,t)=>e+("function"==typeof t?t(r):t)),""))),new B("Concatenatable",Y("StringLiteral","VariableExpression")),new B("LiteralSubstitution",Z(/^\|/,K(Z(/[^$|]*/,"VariableExpression",/[^$|]*/)),/\|$/),(e=>{let[,r]=e;return e=>J(r).reduce(((r,t)=>"string"==typeof t?r+t:r+t(e)),"")})),new B("LogicalOperation",Y("LogicalAndOperation","LogicalOrOperation")),new B("LogicalAndOperation",Z("Expression","LogicalAndOperator","Expression"),(e=>{let[r,,t]=e;return e=>{let s=r(e),n=t(e);return s&&n}})),new B("LogicalAndOperator",Y(/&&/,/and/)),new B("LogicalOrOperation",Z("Expression","LogicalOrOperator","Expression"),(e=>{let[r,,t]=e;return e=>{let s=r(e),n=t(e);return s||n}})),new B("LogicalOrOperator",Y(/\|\|/,/or/)),new B("Negation",/!/),new B("EqualityOperation",Z("Expression","EqualityOperator","Expression"),(e=>{let[r,t,s]=e;return e=>{let n=r(e),o=s(e);switch(t(e)){case"==":return n==o;case"eq":case"===":return n===o;case"!=":return n!=o;case"ne":case"!==":return n!==o}return!1}})),new B("EqualityOperator",Y(/[=!]==?/,/eq/,/ne/)),new B("LogicalExpression",Y("EqualityOperation","LogicalOperation","Expression")),new B("IfThenCondition",Z("LogicalExpression",/\?/,"Expression"),(e=>{let[r,,t]=e;return e=>r(e)?t(e):void 0})),new B("IfThenElseCondition",Z("LogicalExpression",/\?/,"Expression",/:/,"Expression"),(e=>{let[r,,t,,s]=e;return e=>r(e)?t(e):s(e)})),new B("Nothing",/^$/),new B("Identifier",/[#a-zA-Z_][\w]*/),new B("PropertyName","Identifier",(e=>r=>{let t=e(r);return Object.prototype.hasOwnProperty.call(r,t)?r[t]:""})),new B("ArrayIndex",/([\w]+)?(\[[\d]*])+/,(e=>r=>function(e,r){const t=function(e){return e.split(".").reduce(((e,r)=>e.concat(r.replace(/["']/g,"").split("[").filter((e=>""!==e)).map((e=>e.replace("]",""))))),[])}(r);let s=Array.isArray(e)?[...e]:{...e};for(let e=0;e<t.length;e++)try{if(void 0===s[t[e]]){s=null;break}s=s[t[e]]}catch(e){s=null;break}return s}(r,e))),new B("MethodCall",Z("MethodName",/\(/,z("MethodParameters"),/\)/),(e=>{let[r,,t]=e;return(e,s)=>{let n=r(e),o=e[n];return o?o.apply(e,t(s||e)):(console.warn(`No method '${n}' present on the current context.  Expression: ${e.expression}`),"")}})),new B("MethodName","Identifier"),new B("MethodParameters",Z("Chain",G(Z(/,/,"Chain"))),(e=>r=>e?J(e).filter((e=>","!==e)).map((e=>e(r))):[])),new B("Expression",Y("LiteralSubstitution","VariableExpression","StringConcatenation","Literal")));var re,te,se=ee;return e.AttributeProcessor=r,e.Dialect=T,e.ElementProcessor=s,e.ExpressionProcessor=D,e.STANDARD_CONFIGURATION=_,e.StandardDialect=R,e.TemplateEngine=class{constructor(){let{dialects:e,messageResolver:r,templateResolver:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;this.messageResolver=r,this.templateResolver=t,this.expressionProcessor=new D(se),this.fragmentSignatureProcessor=new D(X),this.processors=e.reduce(((e,r)=>{let{processors:t}=r;return t?[...e,...t]:e}),[]),this.expressionObjects=e.reduce(((e,r)=>{let{expressionObjects:t}=r;return t?{...e,...t}:e}),{})}process(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=i(e),s=t.firstElementChild;return this.processNode(s,{...r,...this.expressionObjects,expressionProcessor:this.expressionProcessor,fragmentSignatureProcessor:this.fragmentSignatureProcessor,messageResolver:this.messageResolver,templateResolver:this.templateResolver}).then((()=>a(t)))}processFile(e){return Promise.reject(new Error("Cannot use TemplateEngine.processFile() inside a browser"))}async processNode(e){let t={...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},...e.__thymeleafLocalVariables||{}},n=new F;for(let o=0;o<this.processors.length;o++){let i=this.processors[o],a=!1,l=n.matches(e,i);if(l&&(i instanceof r?a=await i.process(e,l,e.getAttribute(l),t):i instanceof s&&(a=await i.process(e,t))),a)return!0}for(let r=0;r<e.children.length;){let s=e.children[r];await this.processNode(s,t)||r++}}},e.ThymeleafExpressionLanguage=se,e}({});
//# sourceMappingURL=thymeleaf.min.js.map
