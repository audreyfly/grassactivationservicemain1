{"version":3,"file":"dom-utils.cjs.js","names":["addEventDelegate","element","eventName","selector","handler","addEventListener","event","target","matches","clearChildren","firstChild","removeChild","deserialize","htmlString","DOMParser","parseFromString","parseJsonFromElement","scope","arguments","length","undefined","document","JSON","parse","querySelector","textContent","trim","serialize","documentOrFragment","nodeType","Node","DOCUMENT_NODE","result","contentType","docType","firstElementChild","name","tagName","outerHTML"],"sources":["dom-utils.js"],"sourcesContent":["/* \n * Copyright 2019, Emanuel Rabina (http://www.ultraq.net.nz/)\n * \n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n * \n *     http://www.apache.org/licenses/LICENSE-2.0\n * \n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Add an event listener to `element` that only fires when the target of the\n * event matches `selector`.\n * \n * @param {Element} element\n * @param {string} eventName\n * @param {string} selector\n * @param {EventListener} handler\n */\nexport function addEventDelegate(element, eventName, selector, handler) {\n\telement.addEventListener(eventName, event => {\n\t\tif (event.target.matches(selector)) {\n\t\t\thandler(event);\n\t\t}\n\t});\n}\n\n/**\n * Removes all of an element's child nodes.\n * \n * @param {Element} element\n */\nexport function clearChildren(element) {\n\twhile (element.firstChild) {\n\t\telement.removeChild(element.firstChild);\n\t}\n}\n\n/**\n * Deserialize an HTML string into a document fragment.\n * \n * @param {string} htmlString\n * @return {Document}\n */\nexport function deserialize(htmlString) {\n\treturn new DOMParser().parseFromString(htmlString, 'text/html');\n}\n\n/**\n * Parse the text content of the element picked out by the given selector as\n * JSON data, returning it as an object.\n * \n * @param {string} selector\n *   A CSS selector for picking out the HTML element that contains the JSON data\n *   to load.\n * @param {Document} [scope]\n *   The DOM tree to run the selector over.\n * @return {object}\n *   The JSON data converted to an object, or `null` if no data could be read.\n */\nexport function parseJsonFromElement(selector, scope = document) {\n\treturn JSON.parse((scope.querySelector(selector)?.textContent?.trim() || null));\n}\n\n/**\n * Serialize a document or document fragment into an HTML string.\n * \n * @param {Document|DocumentFragment} documentOrFragment\n * @return {string}\n */\nexport function serialize(documentOrFragment) {\n\tif (documentOrFragment.nodeType === Node.DOCUMENT_NODE) {\n\t\tlet result = '';\n\t\tlet {contentType, docType, firstElementChild} = documentOrFragment;\n\t\tif (docType) {\n\t\t\tresult += `<!DOCTYPE ${docType.name}>`;\n\t\t}\n\t\telse if (firstElementChild.tagName === 'HTML' || contentType === 'text/html') {\n\t\t\tresult += `<!DOCTYPE html>`;\n\t\t}\n\t\tresult += firstElementChild.outerHTML;\n\t\treturn result;\n\t}\n\treturn documentOrFragment.outerHTML;\n}\n"],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASA,gBAAgBA,CAACC,OAAO,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,OAAO,EAAE;EACvEH,OAAO,CAACI,gBAAgB,CAACH,SAAS,EAAEI,KAAK,IAAI;IAC5C,IAAIA,KAAK,CAACC,MAAM,CAACC,OAAO,CAACL,QAAQ,CAAC,EAAE;MACnCC,OAAO,CAACE,KAAK,CAAC;IACf;EACD,CAAC,CAAC;AACH;;AAEA;AACA;AACA;AACA;AACA;AACO,SAASG,aAAaA,CAACR,OAAO,EAAE;EACtC,OAAOA,OAAO,CAACS,UAAU,EAAE;IAC1BT,OAAO,CAACU,WAAW,CAACV,OAAO,CAACS,UAAU,CAAC;EACxC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,SAASE,WAAWA,CAACC,UAAU,EAAE;EACvC,OAAO,IAAIC,SAAS,CAAC,CAAC,CAACC,eAAe,CAACF,UAAU,EAAE,WAAW,CAAC;AAChE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASG,oBAAoBA,CAACb,QAAQ,EAAoB;EAAA,IAAlBc,KAAK,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGG,QAAQ;EAC9D,OAAOC,IAAI,CAACC,KAAK,CAAEN,KAAK,CAACO,aAAa,CAACrB,QAAQ,CAAC,EAAEsB,WAAW,EAAEC,IAAI,CAAC,CAAC,IAAI,IAAK,CAAC;AAChF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,SAASA,CAACC,kBAAkB,EAAE;EAC7C,IAAIA,kBAAkB,CAACC,QAAQ,KAAKC,IAAI,CAACC,aAAa,EAAE;IACvD,IAAIC,MAAM,GAAG,EAAE;IACf,IAAI;MAACC,WAAW;MAAEC,OAAO;MAAEC;IAAiB,CAAC,GAAGP,kBAAkB;IAClE,IAAIM,OAAO,EAAE;MACZF,MAAM,IAAK,aAAYE,OAAO,CAACE,IAAK,GAAE;IACvC,CAAC,MACI,IAAID,iBAAiB,CAACE,OAAO,KAAK,MAAM,IAAIJ,WAAW,KAAK,WAAW,EAAE;MAC7ED,MAAM,IAAK,iBAAgB;IAC5B;IACAA,MAAM,IAAIG,iBAAiB,CAACG,SAAS;IACrC,OAAON,MAAM;EACd;EACA,OAAOJ,kBAAkB,CAACU,SAAS;AACpC"}